
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the Kittn API"
        >
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-8fbb5bbd.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-b8a57152.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#base-url" class="toc-h2 toc-link" data-title="Base URL">Base URL</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authorization" class="toc-h1 toc-link" data-title="Authorization">Authorization</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#header" class="toc-h2 toc-link" data-title="ヘッダー header">ヘッダー header</a>
                  </li>
                  <li>
                    <a href="#payload" class="toc-h2 toc-link" data-title="ペイロード payload">ペイロード payload</a>
                  </li>
                  <li>
                    <a href="#eb5b27ac40" class="toc-h2 toc-link" data-title="署名">署名</a>
                  </li>
                  <li>
                    <a href="#jwt" class="toc-h2 toc-link" data-title="JWT を生成する">JWT を生成する</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#token" class="toc-h1 toc-link" data-title="Token">Token</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#15f066d170" class="toc-h2 toc-link" data-title="トークンを生成する">トークンを生成する</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#session-queue" class="toc-h1 toc-link" data-title="Session Queue">Session Queue</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#8229a87602" class="toc-h2 toc-link" data-title="実行キューを作成する">実行キューを作成する</a>
                  </li>
                  <li>
                    <a href="#7f75472535" class="toc-h2 toc-link" data-title="実行キューの一覧を取得する">実行キューの一覧を取得する</a>
                  </li>
                  <li>
                    <a href="#cbbd9c5e86" class="toc-h2 toc-link" data-title="実行キューをキャンセルする">実行キューをキャンセルする</a>
                  </li>
                  <li>
                    <a href="#session-queue-schema" class="toc-h2 toc-link" data-title="Session Queue Schema">Session Queue Schema</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#workflow-2" class="toc-h1 toc-link" data-title="Workflow">Workflow</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#6158469c28" class="toc-h2 toc-link" data-title="ワークフロー一覧を取得する。">ワークフロー一覧を取得する。</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#quota" class="toc-h1 toc-link" data-title="Quota">Quota</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://autoro.io'>AUTORO の製品ページはこちら</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='overview'>Overview</h1>
<p>このドキュメントは、<a href="https://autoro.io">AUTORO</a> のREST APIエンドポイントと
その使い方をまとめています。</p>

<p>ここではコマンドラインでの利用で記述していますので、各プログラミング言語でも同様にできますので、適宜読み替えを行なってください。</p>
<h2 id='base-url'>Base URL</h2>
<p>ここで紹介する API のエンドポイントのドメインは、次のものです。</p>

<p><code>https://api.roboticcrowd.com/</code></p>

<p>全てのエンドポイントはこのドメイン以下に設定されています。</p>
<h1 id='authorization'>Authorization</h1>
<blockquote>
<p>cURL での認証情報の送信</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> GET <span class="s2">"https://api.roboticcrowd.com/v1/path/to/endpoint"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"Authorization: Bearer [your_jwt_token]"</span> 
</code></pre></div>
<blockquote>
<p>*<code>path/to/endpoint</code> と <code>[your_jwt_token]</code> は、正しいエンドポイントに置き換えてください。</p>

<p>例えば具体的には、次のようになります。</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s2">"https://api.roboticcrowd.com/v1/session_queues"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJodHRwczovL2FwaS5yb2JvdGljY3Jvd2QuY29tLyIsImlzcyI6ImNvbnNvbGUucm9ib3RpY2Nyb3dkLmNvbSIsInN1YiI6Iklqb2lJaXdpWjNKaGJuUnpJanA3SW0iLCJuYmYiOjE0NTA0NzExNDcsImV4cCI6MTQ1MDQ3Mzc0Nywic2NvcGVzIjpbInNlc3Npb25fcXVldWUud3JpdGUiLCJzZXNzaW9uX3F1ZXVlLnJlYWQiLCJ0b2tlbiJdfQ.fpJ-Ho1IvdRdDdBD-ncp7Xkbijj6UmcboUODi_XtMJk"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s2">"{
  </span><span class="se">\"</span><span class="s2">workflow_id</span><span class="se">\"</span><span class="s2">: 6391
}"</span> 
</code></pre></div>
<blockquote>
<p>*<code>path/to/endpoint</code> と <code>[your_jwt_token]</code> は、正しいエンドポイントに置き換えてください。</p>
</blockquote>

<p>AUTORO では、API の認証にJWTを使っています。JWTは、プロジェクト内で作成した API Key のaccess_key_id と secret_access_key から作成することができます。API Key は、
プロジェクトオーナー権限をもつユーザーがプロジェクト管理画面から作成する事ができます。
API Key の作成については、<a href="https://support.autoro.io/docs/management-2/%e3%81%9d%e3%81%ae%e4%bb%96%e3%81%ae%e8%a8%ad%e5%ae%9a/api%e3%82%ad%e3%83%bc%e3%81%ae%e7%99%ba%e8%a1%8c/">こちらの記事</a>を参照してください。</p>

<p>クライアント側で JWT を作成する事を想定していますが、JWT トークンを取得するためのエンドポイントも用意しています。</p>

<p>JWT は、3つの部分、すなわちヘッダー、ペイロード、および署名からなる、エンコードされたJSONオブジェクトです。</p>

<p>API の認証は、ヘッダーに以下のように JWT を設定することで可能になります。</p>

<p><code>
Authorization: Bearer [your_jwt_token]
</code></p>

<p>具体的には、次のような形式になります。</p>

<p><code>
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJodHRwczovL2FwaS5yb2JvdGljY3Jvd2QuY29tLyIsImlzcyI6ImNvbnNvbGUucm9ib3RpY2Nyb3dkLmNvbSIsInN1YiI6Iklqb2lJaXdpWjNKaGJuUnpJanA3SW0iLCJuYmYiOjE0NTA0NzExNDcsImV4cCI6MTQ1MDQ3Mzc0Nywic2NvcGVzIjpbInNlc3Npb25fcXVldWUud3JpdGUiLCJzZXNzaW9uX3F1ZXVlLnJlYWQiLCJ0b2tlbiJdfQ.fpJ-Ho1IvdRdDdBD-ncp7Xkbijj6UmcboUODi_XtMJk
</code></p>

<p><strong>JWT の形式</strong></p>

<blockquote>
<p>JWT の具体例</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJodHRwczovL2FwaS5yb2JvdGljY3Jvd2QuY29tLyIsImlzcyI6ImNvbnNvbGUucm9ib3RpY2Nyb3dkLmNvbSIsInN1YiI6Iklqb2lJaXdpWjNKaGJuUnpJanA3SW0iLCJuYmYiOjE0NTA0NzExNDcsImV4cCI6MTQ1MDQ3Mzc0Nywic2NvcGVzIjpbInNlc3Npb25fcXVldWUud3JpdGUiLCJzZXNzaW9uX3F1ZXVlLnJlYWQiLCJ0b2tlbiJdfQ.fpJ-Ho1IvdRdDdBD-ncp7Xkbijj6UmcboUODi_XtMJk
</code></pre></div>
<p>JWT は、base64 エンコードされた、 JSON 形式の header と payload また、その両者を繋げて、ハッシュ化した signature のパートからなり、全部を <code>.</code> で繋げた文字列になります。</p>

<p><code>[header].[payload].[signature]</code></p>

<p>具体例を右側（小さい画面では下側）に表示しています。
この形でエンコードされた文字列が JWT になります。</p>

<p><a href="https://jwt.io">jwt.io</a> でトークンを検証する事ができます。</p>
<h2 id='header'>ヘッダー header</h2>
<blockquote>
<p>header</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HS256"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"typ"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JWT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>ヘッダーに使われる JSON は、次のようになります。</p>
<h3 id='alg'>alg</h3>
<p><code>alg</code> は、署名を生成するアルゴリズムを指定しています。 <code>HS256</code> となっている必要があります。</p>
<h3 id='typ'>typ</h3>
<p><code>typ</code> は、 <code>JWT</code> となっている必要があります。</p>
<h2 id='payload'>ペイロード payload</h2>
<blockquote>
<p>payload</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"console.roboticcrowd.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IjoiIiwiZ3JhbnRzIjp7Im"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.roboticcrowd.com/"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nbf"</span><span class="p">:</span><span class="w"> </span><span class="mi">1450471147</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1450473747</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"session_queue.write session_queue.read access_token.create"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>各項目について説明していきます。</p>
<h3 id='iss'>iss</h3>
<p><code>iss</code> は、トークンの発行者を示すデータです。<code>console.roboticcrowd.com</code> を設定してください。</p>
<h3 id='sub'>sub</h3>
<p><code>sub</code> は、API Key を作成した時に決定される AUTORO 内で一意の ID です。利用する API Key の <code>access_key_id</code> をセットしてください。 AUTORO は、<code>sub</code> を一人のユーザーとして認識します。</p>
<h3 id='aud'>aud</h3>
<p><code>aud</code> は、トークンを受け取るURLです。<code>https://api.roboticcrowd.com/</code> である必要があります。</p>
<h3 id='nbf'>nbf</h3>
<p><code>nbf</code> は、<code>not before</code> の略で、指定した unix 時間以降にトークンが初めて有効になります。通常は、現在時刻を指定しておけば問題ないでしょう。</p>
<h3 id='exp'>exp</h3>
<p><code>exp</code> は、<code>expire</code> の略で、指定した unix 時間以降にトークンが無効になります。</p>

<aside class="notice">
長い有効期限（例えば、1年など）を設定するのは避けましょう。現在、個別のトークンを無効化することはできません。
全ての JWT を無効化するには API Key ごと削除する必要があります。
</aside>
<h3 id='scopes'>scopes</h3>
<p><code>scopes</code> は、このトークンで許容された API の利用権限を入力します。</p>

<p>この権限は、API Key を作成する時にも設定できますが、個別のトークンにもスコープを設定できます。
両方で許容された権限のみが利用できるようになります。</p>

<p><strong>スコープの詳細</strong></p>

<table><thead>
<tr>
<th>スコープ</th>
<th>権限</th>
</tr>
</thead><tbody>
<tr>
<td>session_queue.write</td>
<td>実行キューを作成できます</td>
</tr>
<tr>
<td>session_queue.read</td>
<td>実行キューの取得、ワークフロー一覧の取得ができます</td>
</tr>
<tr>
<td>session_queue.delete</td>
<td>実行キューをキャンセルできます</td>
</tr>
<tr>
<td>access_token.create</td>
<td>トークンの作成ができます</td>
</tr>
</tbody></table>
<h2 id='eb5b27ac40'>署名</h2>
<blockquote>
<p>signature</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">HMACSHA256</span><span class="p">(</span>
  <span class="nx">base64UrlEncode</span><span class="p">(</span><span class="nx">header</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">.</span><span class="dl">"</span> <span class="o">+</span>
  <span class="nx">base64UrlEncode</span><span class="p">(</span><span class="nx">payload</span><span class="p">),</span>
  <span class="dl">"</span><span class="s2">your_secret_access_key</span><span class="dl">"</span>
<span class="p">)</span>
</code></pre></div>
<blockquote>
<p>*<code>your_secret_access_key</code> は、正しいアクセスキーで置き換えてください。</p>

<p>コマンドラインでの署名は、次の節の JWT を生成するを参照してください。</p>
</blockquote>

<p>署名は、トークンの信頼性を担保するパートになっています。署名は、 header と payload をそれぞれ base64 エンコードした文字列を <code>.</code> で接続し、 <code>secret_access_key</code> でハッシュ値を計算したものになります。ですので、 <code>secret_access_key</code> が安全に保存されている事は非常に重要になります。</p>

<p>AUTORO では、 <code>secret_access_key</code> は、暗号化されデータベースに保存されています。生の <code>secret_access_key</code> は、API Key を生成したタイミングで一度だけ表示されます。そして2度とやりとりされることはありません。</p>

<p>署名を検証することにより、ペイロードが改ざんされていないことを確認する事ができます。</p>
<h2 id='jwt'>JWT を生成する</h2>
<blockquote>
<p>headerを生成する</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="nb">echo</span> <span class="nt">-n</span> <span class="s1">'{"alg":"HS256","typ":"JWT"}'</span> | <span class="nb">base64</span>
<span class="c"># eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</span>
</code></pre></div>
<blockquote>
<p>payloadを生成する</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="nb">echo</span> <span class="nt">-n</span> <span class="s1">'{"iss": "console.roboticcrowd.com","sub": "IjoiIiwiZ3JhbnRzIjp7Im","aud": "https://api.roboticcrowd.com/","nbf": 1450471147,"exp": 1450473747,"scopes": "session_queue.write session_queue.read access_token.create"}'</span> | <span class="se">\</span>
<span class="nb">base64</span> | <span class="se">\</span>
<span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'='</span>

<span class="c"># eyJpc3MiOiAiY29uc29sZS5yb2JvdGljY3Jvd2QuY29tIiwic3ViIjogIklqb2lJaXdpWjNKaGJuUnpJanA3SW0iLCJhdWQiOiAiaHR0cHM6Ly9hcGkucm9ib3RpY2Nyb3dkLmNvbS8iLCJuYmYiOiAxNDUwNDcxMTQ3LCJleHAiOiAxNDUwNDczNzQ3LCJzY29wZXMiOiAic2Vzc2lvbl9xdWV1ZS53cml0ZSBzZXNzaW9uX3F1ZXVlLnJlYWQgYWNjZXNzX3Rva2VuLmNyZWF0ZSJ9</span>
</code></pre></div>
<blockquote>
<p>signatureを生成する</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># echo -n "header.payload" | openssl dgst -binary -sha256 -hmac "secret_access_key" | base64 | sed "s/+/-/g;s/\//_/g;s/=//g"</span>

<span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiAiY29uc29sZS5yb2JvdGljY3Jvd2QuY29tIiwic3ViIjogIklqb2lJaXdpWjNKaGJuUnpJanA3SW0iLCJhdWQiOiAiaHR0cHM6Ly9hcGkucm9ib3RpY2Nyb3dkLmNvbS8iLCJuYmYiOiAxNDUwNDcxMTQ3LCJleHAiOiAxNDUwNDczNzQ3LCJzY29wZXMiOiAic2Vzc2lvbl9xdWV1ZS53cml0ZSBzZXNzaW9uX3F1ZXVlLnJlYWQgYWNjZXNzX3Rva2VuLmNyZWF0ZSJ9"</span> | <span class="se">\</span>
openssl dgst <span class="nt">-binary</span> <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"523463041EF9FFA2950D8450FEB34C88BC8692C40C9CF3C99DCDF75E270229E2"</span> | <span class="se">\</span>
<span class="nb">base64</span> | <span class="nb">sed</span> <span class="s2">"s/+/-/g;s/</span><span class="se">\/</span><span class="s2">/_/g;s/=//g"</span>

<span class="c"># 45ervId5_CudT4hya5Tbx30OrO08KCewFQlgxU7mfew</span>
</code></pre></div>
<blockquote>
<p>生成されたJWT</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiAiY29uc29sZS5yb2JvdGljY3Jvd2QuY29tIiwic3ViIjogIklqb2lJaXdpWjNKaGJuUnpJanA3SW0iLCJhdWQiOiAiaHR0cHM6Ly9hcGkucm9ib3RpY2Nyb3dkLmNvbS8iLCJuYmYiOiAxNDUwNDcxMTQ3LCJleHAiOiAxNDUwNDczNzQ3LCJzY29wZXMiOiAic2Vzc2lvbl9xdWV1ZS53cml0ZSBzZXNzaW9uX3F1ZXVlLnJlYWQgYWNjZXNzX3Rva2VuLmNyZWF0ZSJ9.45ervId5_CudT4hya5Tbx30OrO08KCewFQlgxU7mfew
</code></pre></div>
<p>JWT を生成するには、URL-safe な base64 文字列に変換する必要があります。command line で base64 エンコードするのは、簡単のようで簡単ではありません。各OSによって微妙に仕様が異なっています。</p>

<p>ここでは、macOSの例を示しています。JWT は、URL-Safe な文字列である必要があるため、<code>+</code> を <code>-</code> に、 <code>/</code> を <code>_</code> に置き換えています。さらに、base64 では、 <code>=</code> がパディングとして利用されており、これは JWT に必要がないので、削除するコマンドも含めています。</p>

<p>まず、ヘッダーを生成します。これは全てのユーザーで同一になるはずで、生成しなくとも、以下のものをそのまま使えます。</p>

<p><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</code></p>

<p>次に、ペイロードを生成します。ペイロードで設定すべきは、 <code>exp</code> と <code>scopes</code> でしょう。
これをできる限り必要最小限のものにすればより安全なトークンを生成できます。</p>

<p>それから、署名を行います。ヘッダーとペイロードを <code>secret_access_key</code> を用いて HMACSHA256 で署名します。</p>

<p>最後に、これらの出力を全てドット <code>.</code> で接続して JWT の完成です。</p>

<p><code>
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiAiY29uc29sZS5yb2JvdGljY3Jvd2QuY29tIiwic3ViIjogIklqb2lJaXdpWjNKaGJuUnpJanA3SW0iLCJhdWQiOiAiaHR0cHM6Ly9hcGkucm9ib3RpY2Nyb3dkLmNvbS8iLCJuYmYiOiAxNDUwNDcxMTQ3LCJleHAiOiAxNDUwNDczNzQ3LCJzY29wZXMiOiAic2Vzc2lvbl9xdWV1ZS53cml0ZSBzZXNzaW9uX3F1ZXVlLnJlYWQgYWNjZXNzX3Rva2VuLmNyZWF0ZSJ9.45ervId5_CudT4hya5Tbx30OrO08KCewFQlgxU7mfew
</code></p>

<p>出来上がった JWT を <a href="https://jwt.io">jwt.io</a> で検証してみましょう。Encoded のテキストエリアに JWT をペーストとします。
その下に、 <code>Invalid Signature</code> と表示されたのではないでしょうか。これは署名が検証できなかったという事です。</p>

<p>右側の Decoded の VERIFY SIGNATURE というセクションにシークレットキーを入力するところがありますので、 この例のシークレットキー <code>523463041EF9FFA2950D8450FEB34C88BC8692C40C9CF3C99DCDF75E270229E2</code> を入力してみてください。</p>

<p>Signature Verified になりましたでしょうか？よかったです。これで JWT が検証され有効なトークンが生成できました。</p>

<aside class="notice">
JWT は、クライアントサイドで生成することを推奨しています。お困りの事がありましたらお問い合わせください。
</aside>

<aside class="warning">
JWT は、header と payload が base64 で誰でもデコードできてしまうので、公開しても大丈夫なのかと誤解してしまうかもしれません。ですが、これは API へのアクセストークンそのものです。安易に共有せず、シークレットキーと同様に安全に使用するようにしてください。
</aside>
<h1 id='token'>Token</h1><h2 id='15f066d170'>トークンを生成する</h2>
<blockquote>
<p>tokenを取得する</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s2">"https://api.roboticcrowd.com/v1/token"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s2">"{
  </span><span class="se">\"</span><span class="s2">access_key_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">your_access_key_id</span><span class="se">\"</span><span class="s2">,
  </span><span class="se">\"</span><span class="s2">secret_access_key</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">your_secret_access_key</span><span class="se">\"</span><span class="s2">,
  </span><span class="se">\"</span><span class="s2">expires</span><span class="se">\"</span><span class="s2">: 3600
}"</span>
</code></pre></div>
<blockquote>
<p>*<code>your_access_key_id</code> と <code>your_secret_access_key</code> は、API Key から正しい値に置き換えてください。</p>
</blockquote>

<p>このエンドポイントは、JWTトークンをサーバーサイドで生成して返却します。他のエンドポイントと認証が異なっており、 <code>access_key_id</code> と <code>secret_access_key</code> を直接送信してもらうことにより認証しています。</p>

<aside class="success">
JWT は、クライアントサイドで生成することを推奨しています。お困りの事がありましたらお問い合わせください。
</aside>
<h3 id='http-request'>HTTP Request</h3>
<p><code>
  POST https://api.roboticcrowd.com/v1/token
</code></p>
<h3 id='218cca7886'>パラメーター</h3><h4 id='access_key_id'>access_key_id</h4>
<p><strong>初期値</strong></p>

<p>無し、必須</p>

<p><strong>説明</strong></p>

<p>アクセスキーIDです。プロジェクトの API Key より確認できます。</p>
<h4 id='secret_access_key'>secret_access_key</h4>
<p><strong>初期値</strong></p>

<p>無し、必須 </p>

<p><strong>説明</strong></p>

<p>シークレットアクセスキーです。プロジェクトの API Key を生成した時にのみ確認できます。紛失した場合は、該当する API Key を削除し新たに作成してください。</p>
<h4 id='expires'>expires</h4>
<p><strong>初期値</strong></p>

<p>600</p>

<p><strong>説明</strong></p>

<p>トークンの有効期間（秒）です。初期値は、10分です。</p>

<aside class="warning">
長い有効期限を設定することで、実質的に有効期限のない API トークンの様に使うことができますが、推奨しておりません。
</aside>

<aside class="notice">
プロジェクト設定画面から API Key を削除することで、生成ずみの JWT を全て無効化することができます。
</aside>
<h1 id='session-queue'>Session Queue</h1>
<p>Session Queue とは、実行キューのことです。実行が要求されると直ちに作成されます。
Session Queue が作成された時に実行可能なロボットがあれば、ただちに実行が試みられます。
実行が試みられると同時にロボットが割り当てられ、Session が作成されます。
params 内のオブジェクトとして設定した key と value は、ワークフロー内で定義した変数の初期値を定義します。</p>
<h2 id='8229a87602'>実行キューを作成する</h2>
<blockquote>
<p>POST /v1/session_queues</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s2">"https://api.roboticcrowd.com/v1/session_queues"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"Authorization: Bearer [jwt_token]"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s2">"{
  </span><span class="se">\"</span><span class="s2">workflow_id</span><span class="se">\"</span><span class="s2">: [workflow_id],
  </span><span class="se">\"</span><span class="s2">params</span><span class="se">\"</span><span class="s2">: {
    </span><span class="se">\"</span><span class="s2">var1</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">this is string</span><span class="se">\"</span><span class="s2">,
    </span><span class="se">\"</span><span class="s2">var2</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\"</span><span class="s2">this</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">is</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">array</span><span class="se">\"</span><span class="s2">]
  }
}"</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123123123</span><span class="p">,</span><span class="w">
  </span><span class="nl">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123123123123</span><span class="p">,</span><span class="w">
  </span><span class="nl">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:02:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ended_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:04:01.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:02:57.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"workflow"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12341234</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome Workflow."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"var1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"var2"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"this"</span><span class="p">,</span><span class="w"> </span><span class="s2">"is"</span><span class="p">,</span><span class="w"> </span><span class="s2">"array"</span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"robot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12341234</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>このエンドポイントは、実行するワークフローの ID を指定して、実行キューを作成します。
指定できるワークフロー ID は、API Key が作成されたプロジェクト内に限ります。</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>
POST https://api.roboticcrowd.com/v1/session_queues
</code></p>
<h3 id='218cca7886-2'>パラメーター</h3><h4 id='workflow_id'>workflow_id</h4>
<p><strong>初期値</strong></p>

<p>無し、必須</p>

<p><strong>説明</strong></p>

<p>ワークフローを指定する ID です。ワークフロー ID は、AUTORO のプロジェクト画面から確認できます。</p>
<h4 id='params'>params</h4>
<p><strong>初期値</strong></p>

<p>無し、任意</p>

<p><strong>説明</strong></p>

<p>ワークフロー内で使用される変数の初期値を定義します。
ワークフロー内で未定義の変数を使用することにより実行時に変数を定義することができるようになります。
現在のところ、ここで指定したパラメーター内に、文字列として変数リテラル <code>${...}</code> が使われていると意図しない挙動をするか例外となります。例： <code>{ var1: &quot;this is ${var1}&quot;}</code></p>
<h3 id='2df46a9925'>応答</h3>
<p>Session Queue Schema のJSONオブジェクトを返却します。</p>
<h2 id='7f75472535'>実行キューの一覧を取得する</h2>
<blockquote>
<p>GET /v1/session_queues</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> GET <span class="s2">"https://api.roboticcrowd.com/v1/session_queues?page=1&amp;per_page=3&amp;query=before:2019-10-11%20after:2019-07-01"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"Authorization: Bearer [your_jwt]"</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"session_queues"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">341559</span><span class="p">,</span><span class="w">
      </span><span class="nl">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
      </span><span class="nl">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:02:57.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ended_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:04:01.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:02:57.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"workflow"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123123</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"var1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is string"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"var2"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"this"</span><span class="p">,</span><span class="w"> </span><span class="s2">"is"</span><span class="p">,</span><span class="w"> </span><span class="s2">"array"</span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"robot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12341234</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sunaba-1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">341558</span><span class="p">,</span><span class="w">
      </span><span class="nl">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
      </span><span class="nl">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:01:44.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ended_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:03:31.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:01:44.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"workflow"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12341234</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"var1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is string"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"var2"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"this"</span><span class="p">,</span><span class="w"> </span><span class="s2">"is"</span><span class="p">,</span><span class="w"> </span><span class="s2">"array"</span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"robot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12341234</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sunaba-2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">341557</span><span class="p">,</span><span class="w">
      </span><span class="nl">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w">
      </span><span class="nl">"started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:00:38.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ended_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:01:23.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-07-09T10:00:38.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"workflow"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12341234</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"var1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is string"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"var2"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"this"</span><span class="p">,</span><span class="w"> </span><span class="s2">"is"</span><span class="p">,</span><span class="w"> </span><span class="s2">"array"</span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"robot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12341234</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sunaba-1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1581</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>このエンドポイントは、API Key が作成されたプロジェクトの Session Queue の一覧を取得します。パラメーターとして、検索条件、ページ数、ページあたりの件数を設定できます。</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>
  GET https://api.roboticcrowd.com/v1/session_queues?page=1&amp;per_page=10&amp;query=
</code></p>
<h3 id='ff199e37f9'>クエリパラメーター</h3><h4 id='query'>query</h4>
<p><strong>初期値</strong></p>

<p>無し</p>

<p><strong>説明</strong></p>

<p>検索条件を文字列で指定します。検索条件については、<a href="https://docs.autoro.io/search/session">こちら</a>に詳細があります。</p>
<h4 id='per_page'>per_page</h4>
<p><strong>初期値</strong></p>

<p>10</p>

<p><strong>説明</strong></p>

<p>取得するページあたりの件数です。
1ページあたりの最大数は50件です。</p>
<h4 id='page'>page</h4>
<p><strong>初期値</strong></p>

<p>1</p>

<p><strong>説明</strong></p>

<p>取得するページです。</p>
<h4 id='organization_id'>organization_id</h4>
<p><strong>初期値</strong></p>

<p>無し</p>

<p><strong>説明</strong></p>

<p>query に workflow_id を指定するとき、組織 ID（organization_id）か プロジェクト ID（project_id）を指定する必要があります。</p>
<h4 id='project_id'>project_id</h4>
<p><strong>初期値</strong></p>

<p>無し</p>

<p><strong>説明</strong></p>

<p>query に workflow_id を指定するとき、組織 ID（organization_id）か プロジェクト ID（project_id）を指定する必要があります。</p>
<h3 id='2df46a9925-2'>応答</h3>
<p>JSON オブジェクトを返却します。</p>
<h4 id='session_queues'>session_queues</h4>
<p>Session Queue Schema の JSON オブジェクトの配列が格納されています。</p>
<h4 id='total_count'>total_count</h4>
<p>Session Queue Schema のトータル件数が格納されています。</p>
<h2 id='cbbd9c5e86'>実行キューをキャンセルする</h2>
<blockquote>
<p>DELETE /v1/session_queues/{session_queue_id}/cancel</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> DELETE <span class="s2">"https://api.roboticcrowd.com/v1/session_queues/{session_queue_id}/cancel"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"Authorization: Bearer [jwt_token]"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"content-type: application/json"</span>
</code></pre></div>
<p>このエンドポイントは、実行キューの ID を指定して、実行中のワークフローの実行をキャンセル、または実行待ちのキューの削除を行います。
指定できる実行キュー ID は、API Key が作成されたプロジェクト内に限ります。</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>
DELETE https://api.roboticcrowd.com/v1/session_queues/{session_queue_id}/cancel
</code></p>
<h3 id='session_queue_id-id'>session_queue_id（実行キューID）の確認方法</h3>
<p>プロジェクトの セッション画面 の ID により確認できます。</p>
<h2 id='session-queue-schema'>Session Queue Schema</h2>
<p>Session Queue のオブジェクトの返却は、</p>
<h4 id='id'>id</h4>
<p>作成された実行キュー（Session Queue）のIDです。</p>
<h4 id='project_id-2'>project_id</h4>
<p>プロジェクト ID です。</p>
<h4 id='started_at'>started_at</h4>
<p>直ちに実行されれば、実行が開始された日時が文字列として入っています。実行されていなければ <code>null</code> となります。</p>
<h4 id='ended_at'>ended_at</h4>
<p>実行が終了していれば、実行が終了した日時が文字列として入っています。終了していなければ <code>null</code> となります。</p>
<h4 id='status'>status</h4>
<p>ステータスは、</p>

<ul>
<li>queued: 実行まち</li>
<li>running: 実行中</li>
<li>success: 成功</li>
<li>error: 失敗（異常終了）</li>
</ul>

<p>のいずれかになります。</p>
<h4 id='created_at'>created_at</h4>
<p>実行キューがデータベースに登録された日時が文字列として入っています。</p>
<h4 id='workflow'>workflow</h4>
<p>ワークフローの詳細が記述されている JSON オブジェクトです。返却される項目は、ID とワークフロー名 (name) だけです。</p>
<h4 id='params-2'>params</h4>
<p>実行キュー作成時に渡された変数が記述されている JSON オブジェクトです。</p>
<h4 id='robot'>robot</h4>
<p>ロボットの詳細が記述されている JSON オブジェクトです。返却される項目は、ID とロボット名 (name) だけです。</p>
<h1 id='workflow-2'>Workflow</h1>
<p>Workflow とは、自動化設定そのものです。外部からワークフローを指定してSession Queue に登録する際に Workflow の ID が必要になりますが、一覧取得のエンドポイントによりIDを確認し指定することができるようになります。</p>
<h2 id='6158469c28'>ワークフロー一覧を取得する。</h2>
<p>このエンドポイントは、API Key が作成されたプロジェクトの Workflow の一覧を取得します。パラメーターとして、ページ数、ページあたりの件数を設定できます。パラメーターの指定がない時は、ページあたりの件数は、300件、ページは1ページ目になります。ページあたりの件数は最大で、1000まで指定できます。</p>

<blockquote>
<p>GET /v1/workflows</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> GET <span class="s2">"https://api.roboticcrowd.com/v1/workflows?page=1&amp;per_page=10"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"Authorization: Bearer [your_jwt]"</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"workflows"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123123122</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"workflow name1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is tutorail user's workflow"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vpn_option_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"debug_mode"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"robot_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"singleruntime"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"single_process_mode"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error_handler_workflow_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receiver_infos"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"workflow_robots"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123123123</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"workflow name2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is tutorials user's workflow"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vpn_option_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"debug_mode"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"robot_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"singleruntime"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"single_process_mode"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error_handler_workflow_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receiver_infos"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"workflow_robots"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="nl">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-5'>HTTP Request</h3>
<p><code>
GET https://api.roboticcrowd.com/v1/workflows?page=1&amp;per_page=10
</code></p>
<h3 id='ff199e37f9-2'>クエリパラメーター</h3><h4 id='per_page-2'>per_page</h4>
<p>初期値
300</p>
<h4 id='f6c2c8d0f4'>説明</h4>
<p>取得するページあたりの件数です。 1ページあたりの最大数は1000件です。</p>
<h4 id='page-2'>page</h4>
<p>初期値
1</p>
<h4 id='f6c2c8d0f4-2'>説明</h4>
<p>取得するページです。</p>
<h3 id='2df46a9925-3'>応答</h3>
<p>JSON オブジェクトを返却します。</p>
<h4 id='workflows'>workflows</h4>
<p>Workflow Schema の JSON オブジェクトの配列が格納されています。</p>
<h4 id='total_count-2'>total_count</h4>
<p>トータル件数が格納されています。</p>
<h1 id='quota'>Quota</h1>
<p>APIリクエストの制限は、各組織で契約しているロボット数に応じて決定されています。ロボット一台の契約につき、 1分ごとに60リクエストを上限としています。</p>
<h1 id='errors'>Errors</h1>
<p>AUTORO が返却する API のエラーコードです。</p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- リクエストが無効です。</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- JWT が無効です。</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- 禁止されたリクエストです。</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- リクエスト対象のリソースが発見できませんでした。これには権限が理由になり発見できなかった場合も含みます。</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- リクエストのフォーマットが異なっています。</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- リクエストのクオータ上限値に達しました。</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- サーバー内で何かしらのエラーが発生しました。</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- サーバーに障害が発生し応答ができません。</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
